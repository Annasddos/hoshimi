<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gemini Chat - WhatsApp Style</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; font-family: 'Inter', sans-serif; }
    body { margin: 0; background: #101010; color: #fff; }
    .container { display: none; height: 100vh; }
    .login-page {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #121212;
    }
    .login-box {
      background: #1f1f1f;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 20px #00e5ff;
      width: 300px;
    }
    .login-box input {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      background: #333;
      border: none;
      border-radius: 6px;
      color: white;
    }
    .login-box button {
      padding: 10px;
      width: 100%;
      background: #00e5ff;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .container { display: flex; }
    .sidebar {
      width: 280px;
      background: #1e1e1e;
      border-right: 1px solid #333;
      display: flex;
      flex-direction: column;
    }
    .sidebar h2 {
      padding: 20px;
      margin: 0;
      background: #151515;
      border-bottom: 1px solid #333;
      text-align: center;
      font-size: 18px;
    }
    .users {
      flex: 1;
      overflow-y: auto;
    }
    .user-item {
      padding: 15px;
      border-bottom: 1px solid #333;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .user-item:hover { background: #2c2c2c; }
    .logout-btn {
      background: #ff4444;
      color: white;
      border: none;
      padding: 10px;
      margin: 10px;
      border-radius: 6px;
      cursor: pointer;
    }
    .chat-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #0e0e0e;
    }
    .chat-header {
      padding: 15px;
      background: #151515;
      border-bottom: 1px solid #333;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .chat-box {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .message {
      max-width: 60%; padding: 10px 14px;
      border-radius: 10px;
      word-wrap: break-word;
      animation: fadeIn 0.3s ease;
    }
    .from-me { align-self: flex-end; background: #075e54; }
    .from-them { align-self: flex-start; background: #2c2c2c; }
    .message-label {
      font-size: 11px;
      opacity: 0.7;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .message-label .check {
      color: #00e5ff;
    }
    .input-area {
      padding: 10px;
      display: flex;
      gap: 10px;
      background: #1a1a1a;
    }
    .input-area input[type="text"] {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: none;
      background: #2c2c2c;
      color: white;
    }
    .input-area input[type="file"] {
      display: none;
    }
    .input-area button {
      padding: 10px 16px;
      background: #00e5ff;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
    }
    audio, img, video { max-width: 100%; border-radius: 8px; }
    a.download-link {
      display: inline-block;
      color: #00e5ff;
      text-decoration: underline;
      margin-top: 6px;
    }
    .stats {
      font-size: 12px;
      padding: 8px;
      text-align: center;
      border-top: 1px solid #333;
      color: #aaa;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
<div class="login-page" id="loginPage">
  <div class="login-box">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <input type="file" id="profilePic" accept="image/*">
    <button onclick="doLogin()">Masuk</button>
  </div>
</div>
<div class="container" id="chatContainer">
  <div class="sidebar">
    <h2>Pengguna</h2>
    <div class="users" id="userList"></div>
    <div class="stats" id="statsBox"></div>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>
  <div class="chat-area">
    <div class="chat-header">
      <span id="chatWith">Pilih pengguna untuk mulai chat</span>
    </div>
    <div class="chat-box" id="chatBox"></div>
    <div class="input-area">
      <input type="file" id="fileInput" accept="image/*,video/*,application/pdf,application/zip">
      <input type="text" id="messageInput" placeholder="Ketik pesan...">
      <button onclick="sendMessage()">Kirim</button>
      <button onclick="recordAudio()">ðŸŽ¤</button>
    </div>
  </div>
</div>
<script>
  const API_KEY = "AIzaSyBYmsmqVHHnio0i7TOLAXmYSsU3UNOhd3o";
  let currentUser = null;
  let selectedUser = null;
  let profiles = JSON.parse(localStorage.getItem("profiles") || "{}");
  let stats = JSON.parse(localStorage.getItem("stats") || "{}");function doLogin() { const uname = document.getElementById("username").value.trim(); const pw = document.getElementById("password").value; const picFile = document.getElementById("profilePic").files[0]; if (!uname || !pw) return alert("Isi semua field!"); currentUser = uname; if (!profiles[uname]) profiles[uname] = { pw, lastSeen: Date.now(), pic: "" }; if (picFile) { const reader = new FileReader(); reader.onload = () => { profiles[uname].pic = reader.result; localStorage.setItem("profiles", JSON.stringify(profiles)); showApp(); }; reader.readAsDataURL(picFile); } else { profiles[uname].lastSeen = Date.now(); localStorage.setItem("profiles", JSON.stringify(profiles)); showApp(); } }

function showApp() { document.getElementById("loginPage").style.display = "none"; document.getElementById("chatContainer").style.display = "flex"; loadUsers(); updateStats(); }

function updateStats() { const total = Object.values(stats).reduce((sum, val) => sum + val, 0); document.getElementById("statsBox").innerText = ðŸ“Š Total Pesan Terkirim: ${total}; }

function logout() { localStorage.removeItem("currentSession"); location.reload(); }

function notify(title, body) { if (Notification.permission === 'granted') { new Notification(title, { body }); } } if (Notification.permission !== 'granted') Notification.requestPermission();

async function sendMessage() { const input = document.getElementById("messageInput"); const text = input.value.trim(); if (!text || !selectedUser) return; const now = Date.now(); const entry = { from: currentUser, text, time: now }; saveChat(entry); renderMessage(entry.from, entry.text, entry.time); input.value = ""; if (selectedUser === "Gemini") { const reply = await fetch(https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ contents: [{ parts: [{ text }] }] }) }); const data = await reply.json(); const response = data?.candidates?.[0]?.content?.parts?.[0]?.text || "(Bot tidak merespon)"; const botMsg = { from: "Gemini", text: response, time: Date.now() }; saveChat(botMsg); renderMessage(botMsg.from, botMsg.text, botMsg.time); } if (!stats[currentUser]) stats[currentUser] = 0; stats[currentUser]++; localStorage.setItem("stats", JSON.stringify(stats)); updateStats(); notify("Pesan terkirim", ke ${selectedUser}); }

// sisanya tetap sama </script>

</body>
</html>